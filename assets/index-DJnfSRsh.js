import{initializeApp as y}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getDatabase as g,ref as c,onValue as l,set as u}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const v={apiKey:"AIzaSyB6nOU3NSsPoQmL2Bfc3LRdRIXJlXe942U",authDomain:"tqanh-ffd59.firebaseapp.com",databaseURL:"https://tqanh-ffd59-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"tqanh-ffd59",storageBucket:"tqanh-ffd59.firebasestorage.app",messagingSenderId:"902357801541",appId:"1:902357801541:web:199e69e94a9971bd28e12c",measurementId:"G-7TLG45XB07"},b=y(v),a=g(b),I="1.0.0 - nghe nháº¡c ytb okay",L=void 0;document.addEventListener("DOMContentLoaded",function(){document.getElementById("version").textContent=`Version ${I}`,document.getElementById("search-button").addEventListener("click",f),document.getElementById("search-input").addEventListener("keypress",function(o){o.key==="Enter"&&f()});const r=c(a,"search");l(r,o=>{const t=o.val();t&&p(t.query,!1)});const s=c(a,"play");l(s,o=>{const t=o.val();t&&m(t.videoId)})});function f(){const r=document.getElementById("search-input").value;console.log("Search query:",r),p(r,!0)}function p(r,s=!0){const o=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(r+" music")}&key=${L}`;console.log("API URL:",o),fetch(o).then(t=>(console.log("Response status:",t.status),t.json())).then(t=>{console.log("API Response:",t);const e=document.getElementById("results");e.innerHTML="",t.items&&t.items.length>0?(t.items.forEach(n=>{const i=n.id.videoId,h=n.snippet.title,d=document.createElement("div");d.innerHTML=`<h3 class="video-title" data-video-id="${i}">${h}</h3>`,e.appendChild(d)}),document.querySelectorAll(".video-title").forEach(n=>{n.addEventListener("click",function(){const i=this.getAttribute("data-video-id");m(i),s&&u(c(a,"play"),{videoId:i})})}),s&&u(c(a,"search"),{query:r})):e.innerHTML="<p>No results found.</p>"}).catch(t=>console.error("Error:",t))}function m(r){const s=document.getElementById("results"),o=document.createElement("iframe");o.src=`https://www.youtube.com/embed/${r}?autoplay=1`,s.innerHTML="",s.appendChild(o)}
