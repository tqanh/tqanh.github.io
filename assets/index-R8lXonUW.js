import{initializeApp as m}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getDatabase as A,ref as a,onValue as l,set as u}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();var c={VITE_FIREBASE_API_KEY:'"AIzaSyB6nOU3NSsPoQmL2Bfc3LRdRIXJlXe942U"',VITE_FIREBASE_AUTH_DOMAIN:'"tqanh-ffd59.firebaseapp.com"',VITE_FIREBASE_DATABASE_URL:'"https://tqanh-ffd59-default-rtdb.asia-southeast1.firebasedatabase.app"',VITE_FIREBASE_PROJECT_ID:'"tqanh-ffd59"',VITE_FIREBASE_STORAGE_BUCKET:'"tqanh-ffd59.firebasestorage.app"',VITE_FIREBASE_MESSAGING_SENDER_ID:'"902357801541"',VITE_FIREBASE_APP_ID:'"1:902357801541:web:199e69e94a9971bd28e12c"',VITE_FIREBASE_MEASUREMENT_ID:'"G-7TLG45XB07"'};const h={apiKey:c.VITE_FIREBASE_API_KEY,authDomain:c.VITE_FIREBASE_AUTH_DOMAIN,databaseURL:c.VITE_FIREBASE_DATABASE_URL,projectId:c.VITE_FIREBASE_PROJECT_ID,storageBucket:c.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:c.VITE_FIREBASE_APP_ID,measurementId:c.VITE_FIREBASE_MEASUREMENT_ID},T=m(h),d=A(T);var y={VITE_YOUTUBE_API_KEY:'"AIzaSyBpLiDptaBp9bFmnS1Jx6oWG8wu1LjzKKI"'};const S="1.0.0 - nghe nháº¡c ytb okay",R=y.VITE_YOUTUBE_API_KEY;document.addEventListener("DOMContentLoaded",function(){document.getElementById("version").textContent=`Version ${S}`,document.getElementById("search-button").addEventListener("click",I),document.getElementById("search-input").addEventListener("keypress",function(o){o.key==="Enter"&&I()});const r=a(d,"search");l(r,o=>{const t=o.val();t&&f(t.query,!1)});const s=a(d,"play");l(s,o=>{const t=o.val();t&&p(t.videoId)})});function I(){const r=document.getElementById("search-input").value;console.log("Search query:",r),f(r,!0)}function f(r,s=!0){const o=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(r+" music")}&key=${R}`;console.log("API URL:",o),fetch(o).then(t=>(console.log("Response status:",t.status),t.json())).then(t=>{console.log("API Response:",t);const e=document.getElementById("results");e.innerHTML="",t.items&&t.items.length>0?(t.items.forEach(n=>{const i=n.id.videoId,_=n.snippet.title,E=document.createElement("div");E.innerHTML=`<h3 class="video-title" data-video-id="${i}">${_}</h3>`,e.appendChild(E)}),document.querySelectorAll(".video-title").forEach(n=>{n.addEventListener("click",function(){const i=this.getAttribute("data-video-id");p(i),s&&u(a(d,"play"),{videoId:i})})}),s&&u(a(d,"search"),{query:r})):e.innerHTML="<p>No results found.</p>"}).catch(t=>console.error("Error:",t))}function p(r){const s=document.getElementById("results"),o=document.createElement("iframe");o.src=`https://www.youtube.com/embed/${r}?autoplay=1`,s.innerHTML="",s.appendChild(o)}
